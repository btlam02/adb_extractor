<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>ALEAPP - Strava report</title>
        <!-- Dark mode -->
        <link rel="stylesheet" href="_elements/dark-mode.css">
        <!-- Font Awesome -->
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.3.0/css/all.min.css">
        <!-- Google Fonts Roboto -->
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap">
        <!-- Bootstrap core CSS -->
        <link rel="stylesheet" href="_elements/MDB-Free_4.13.0/css/bootstrap.min.css">
        <!-- Material Design Bootstrap - TOGGLE THIS FOR ALTERNATE DESIGN!-->
        <link rel="stylesheet" href="_elements/MDB-Free_4.13.0/css/mdb.min.css">
        <!-- Highlight.js -->
        <link rel="stylesheet" href="_elements/highlight.min.css">
        <script src="_elements/highlight.min.js"></script>
        <!-- Cal-Heatmap -->
        <script src="_elements/d3.v7.min.js"></script>
        <script src="_elements/cal-heatmap.min.js"></script>
        <link rel="stylesheet" href="_elements/cal-heatmap.css">
        <script src="_elements/popper.min.js"></script>
        <script src="_elements/Tooltip.min.js"></script>
        <!-- Your custom styles (optional) -->
        <link rel="stylesheet" href="_elements/dashboard.css">
        <link rel="stylesheet" href="_elements/chat.css">
        <!-- MDBootstrap Datatables  -->
        <link rel="stylesheet" href="_elements/MDB-Free_4.13.0/css/addons/datatables.min.css" rel="stylesheet">
        <link href="_elements/timeline/css/timeline.min.css" rel="stylesheet" />

        <!-- Icons -->
        <!--script src="https://unpkg.com/feather-icons/dist/feather.min.js"></script-->
        <script src="_elements/feather.min.js"></script>
    </head>
    <body>

    <!-- Start your project here-->
    <nav class="navbar navbar-dark fixed-top bg-dark flex-md-nowrap p-0 shadow">
        <a class="navbar-brand col-sm-3 col-md-2 mr-0" href="#">ALEAPP 3.3.0</a>
        <div class="custom-control custom-switch">
            <input type="checkbox" class="custom-control-input" id="darkSwitch" />
            <label class="custom-control-label mr-2" for="darkSwitch" style="color:white">Dark Switch</label>
        </div>
        <script src="_elements/dark-mode-switch.js"></script>
    </nav>

    <div class="container-fluid">
        <div class="row">

            <nav class="col-md-2 d-none d-md-block bg-light sidebar">
                <div class="sidebar-sticky" id="sidebar_id">
                    <ul class="nav flex-column">

        <h6 class="sidebar-heading justify-content-between align-items-center px-3 mt-4 mb-1 text-muted">
            Saved Reports
        </h6>
        
        <li class="nav-item">
            <a class="nav-link " href="index.html">
                <span data-feather="home"></span> Report Home
            </a>
        </li>
        
        <h6 class="sidebar-heading justify-content-between align-items-center px-3 mt-4 mb-1 text-muted">
            Strava
        </h6>
        
        <li class="nav-item">
            <a class="nav-link  active" href="Strava.html">
                <span data-feather="map"></span> Strava
            </a>
        </li>
        
    <script>
        feather.replace();
        var element = document.getElementById("sidebar_id");
        var searchParams = new URLSearchParams(window.location.search);
        if (searchParams.has('navpos')) {
            var nav_pos = parseInt(searchParams.get('navpos'));
            if (!isNaN(nav_pos))
                element.scrollTop = nav_pos;
        }
    </script>

                    </ul>
                    <br /><br />
                </div>
            </nav>

            <main role="main" class="col-md-9 ml-sm-auto col-lg-10 px-4">

                <div class="justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
                    <img src="_elements/ALEAPP_banner.png" alt="iLEAPP banner">
                    <h3 class="display-5">Strava report</h1>
                    <h6 class="animated fadeIn mb-3"></h6>
                </div>

                <div id="mySpinner" class="spinner-border text-info float-right" role="status">
                    <span class="sr-only">Loading...</span>
                </div>
<div class="row"><div class="col-md-6"><div class="form-group"><label for="dateFrom">From</label><input type="date" class="form-control" id="dateFrom" value="2019-01-01"></div></div><div class="col-md-6"><div class="form-group"><label for="dateTo">To</label><input type="date" class="form-control" id="dateTo"></div></div></div>
            </main>
        </div>
    </div>

    <!-- End your project here-->

    <!-- jQuery -->
    <script type="text/javascript" src="_elements/MDB-Free_4.13.0/js/jquery.min.js"></script>
    <!-- Bootstrap tooltips -->
    <script type="text/javascript" src="_elements/MDB-Free_4.13.0/js/popper.min.js"></script>
    <!-- Bootstrap core JavaScript -->
    <script type="text/javascript" src="_elements/MDB-Free_4.13.0/js/bootstrap.js"></script>
    <!-- MDB core JavaScript -->
    <script type="text/javascript" src="_elements/MDB-Free_4.13.0/js/mdb.min.js"></script>
    <!-- Your custom scripts -->
    <!-- MDBootstrap Datatables  -->
    <script type="text/javascript" src="_elements/MDB-Free_4.13.0/js/addons/datatables.min.js"></script>
    <!-- Chart.js -->
    <script type="text/javascript" src="_elements/chart.umd.min.js"></script>
    <script type="text/javascript" src="_elements/moment.min.js"></script>
    <script type="text/javascript" src="_elements/timeline/js/timeline.min.js"></script>
    <!-- Garmin Functions -->
    <script type="text/javascript" src="_elements/garmin-functions.js"></script>
    <script type="text/javascript" src="_elements/chat.js"></script>
    <script>
        feather.replace()
    </script>

    <script>
        $(document).ready(function() {
            $('#dtBasicExample').DataTable({
                //"scrollY": "60vh",
                //"scrollX": "10%",
                //"scrollCollapse": true,
                "aLengthMenu": [[ 15, 50, 100, -1 ], [ 15, 50, 100, "All" ]],
            });
            $('.dataTables_length').addClass('bs-select');
            $('#mySpinner').remove();
            //$('#infiniteLoading').remove();
        });
    </script>

    <script>
        var elemScrollTop = document.getElementById("sidebar_id").scrollTop.toString();
        document.addEventListener("DOMContentLoaded", function() {
            var element = document.getElementById("sidebar_id");
            element.addEventListener("scroll", function() {
                elemScrollTop = document.getElementById("sidebar_id").scrollTop.toString();
            });
        });
        $('a.nav-link').click(function(e) {
            e.preventDefault();
            location.href = $(this).attr('href') + "?navpos=" + elemScrollTop;
        });
    </script>
<script>
           $(document).ready(function() {
               var table = $('#Strava').DataTable();
               //Put current date in dateTo
               var today = new Date();
               var dd = today.getDate();
               var mm = today.getMonth()+1; //January is 0!
               var yyyy = today.getFullYear();
               if(dd<10){
                   dd='0'+dd
               }
               if(mm<10){
                   mm='0'+mm
               }
               today = yyyy+'-'+mm+'-'+dd;
               $('#dateTo').val(today);
               // All data above or equal to dateFrom and below or equal to dateTo
               $.fn.dataTable.ext.search.push(
                   function(settings, data, dataIndex) {
                       var dateFrom = new Date($('#dateFrom').val());
                       var dateTo = new Date($('#dateTo').val());
                       var date = new Date(data[1]);
                       if (dateFrom <= date && date <= dateTo) {
                           return true;
                       }
                       return false;
                   }
               );
               // Event listener to the two range filtering inputs to redraw on input
               $('#dateFrom, #dateTo').change(function() {
                   table.draw();
               });
           });
           </script>
           
    </body>
</html>
